CREATE TABLE USERTB (
	USERNAME VARCHAR2(20),
	PASSWORD VARCHAR2(500) NOT NULL,
	NAME VARCHAR2(100),
	PRIMARY KEY(USERNAME)
);

/*Username: Miguel, password: pass*/
INSERT INTO USERTB (USERNAME, PASSWORD, NAME) 
VALUES ('Miguel','$2a$10$2sZ/K/d9ZRMxqiQwfUJXoefMZyGZVOVgrnKGCR2NwmQN3FEYab3PW', '');

CREATE TABLE ROLTB (
	ID_ROL VARCHAR2(36),
	ROL VARCHAR2(100) NOT NULL,
	PRIMARY KEY(ID_ROL)
);

INSERT INTO ROLTB (ID_ROL, ROL) 
VALUES ('c21488fa-bf6c-4e28-8d02-87e7f1ad422a','ROLE_ADMIN');

INSERT INTO ROLTB (ID_ROL, ROL) 
VALUES ('91bbad7b-4a58-494a-b018-2ae68642aa18','ROLE_USER');

CREATE TABLE AUTHORITYTB (
	ID_AUTHORITY VARCHAR2(36),
	AUTHORITY VARCHAR2(100) NOT NULL,
	PRIMARY KEY(ID_AUTHORITY)
); 

INSERT INTO AUTHORITYTB (ID_AUTHORITY, AUTHORITY) VALUES ('047d933c-52a4-40dd-a7f8-f72601db4e89', 'CREATE');
INSERT INTO AUTHORITYTB (ID_AUTHORITY, AUTHORITY) VALUES ('5443172d-707d-4718-ab33-25cef85228b2', 'READ');
INSERT INTO AUTHORITYTB (ID_AUTHORITY, AUTHORITY) VALUES ('413429ac-d910-493c-be0a-fce5a7cb72c8', 'UPDATE');
INSERT INTO AUTHORITYTB (ID_AUTHORITY, AUTHORITY) VALUES ('0137566d-f0e5-42b8-8150-325412aefdf5', 'DELETE');


CREATE TABLE ROLAUTHORITYTB (
	ID_ROL VARCHAR2(36),
	ID_AUTHORITY VARCHAR2(36),
	PRIMARY KEY (ID_ROL, ID_AUTHORITY),
	FOREIGN KEY (ID_ROL) REFERENCES ROLTB(ID_ROL),
	FOREIGN KEY (ID_AUTHORITY) REFERENCES AUTHORITYTB(ID_AUTHORITY)
);

/* ADMIN */
INSERT INTO ROLAUTHORITYTB (ID_ROL, ID_AUTHORITY) VALUES ('c21488fa-bf6c-4e28-8d02-87e7f1ad422a', '047d933c-52a4-40dd-a7f8-f72601db4e89');
INSERT INTO ROLAUTHORITYTB (ID_ROL, ID_AUTHORITY) VALUES ('c21488fa-bf6c-4e28-8d02-87e7f1ad422a', '5443172d-707d-4718-ab33-25cef85228b2');
INSERT INTO ROLAUTHORITYTB (ID_ROL, ID_AUTHORITY) VALUES ('c21488fa-bf6c-4e28-8d02-87e7f1ad422a', '413429ac-d910-493c-be0a-fce5a7cb72c8');
INSERT INTO ROLAUTHORITYTB (ID_ROL, ID_AUTHORITY) VALUES ('c21488fa-bf6c-4e28-8d02-87e7f1ad422a', '0137566d-f0e5-42b8-8150-325412aefdf5');

/* USER */
INSERT INTO ROLAUTHORITYTB (ID_ROL, ID_AUTHORITY) VALUES ('91bbad7b-4a58-494a-b018-2ae68642aa18', '5443172d-707d-4718-ab33-25cef85228b2');


CREATE TABLE USERROL (
	USERNAME VARCHAR2(20),
	ID_ROL VARCHAR2(36),
	PRIMARY KEY (USERNAME, ID_ROL),
	FOREIGN KEY (USERNAME) REFERENCES USERTB(USERNAME),
	FOREIGN KEY (ID_ROL) REFERENCES ROLTB(ID_ROL)
);


INSERT INTO USERROL (USERNAME, ID_ROL)
VALUES ('Miguel', 'c21488fa-bf6c-4e28-8d02-87e7f1ad422a');



CREATE TABLE HISTORICALTB (
	ID_RECORD VARCHAR2(36),
	TABLE_NAME VARCHAR2(200),
	ACTION_EXECUTED VARCHAR2(200),
	PREV_RECORD VARCHAR2(4000),
	PRIMARY KEY(ID_RECORD)
);



